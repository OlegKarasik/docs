{{ $terraformCodeBlock := `resource "aws_s3_bucket" "mybucket" {
    bucket_prefix = "mybucket"
}

resource "aws_s3_bucket_object" "data_txt" {
    key        = "data.txt"
    bucket     = "${aws_s3_bucket.mybucket.id}"
    source     = "./files/data.txt"
}

resource "aws_s3_bucket_object" "index_html" {
    key        = "index.html"
    bucket     = "${aws_s3_bucket.mybucket.id}"
    source     = "./files/index.html"
}

resource "aws_s3_bucket_object" "index_js" {
    key        = "index.js"
    bucket     = "${aws_s3_bucket.mybucket.id}"
    source     = "./files/index.js"
}

resource "aws_s3_bucket_object" "main.css" {
    key        = "main.css"
    bucket     = "${aws_s3_bucket.mybucket.id}"
    source     = "./files/main.css"
}

resource "aws_s3_bucket_object" "favicon.ico" {
    key        = "favicon.ico"
    bucket     = "${aws_s3_bucket.mybucket.id}"
    source     = "./files/favicon.ico"
}`}}

{{ $typeScriptCodeBlock := `import * as aws from "@pulumi/aws";
import { readFileSync, readdirSync } from "fs";
import { join as pathjoin } from "path";

const bucket = new aws.s3.Bucket("mybucket");

const folder = "./files";
let files = readdirSync(folder);
for (let file of files) {
    const object = new aws.s3.BucketObject(file, {
        bucket: bucket,
        content: readFileSync(pathjoin(folder, file)).toString("utf8")
    });
}

export const bucketname = bucket.id;` }}

{{ $pythonCodeBlock := `import os
import mimetypes

from pulumi import export, FileAsset
from pulumi_aws import s3

bucket = s3.Bucket('my-bucket')

for file in os.listdir('files'):
    filepath = os.path.join(content_dir, file)
    mime_type, _ = mimetypes.guess_type(filepath)
    s3.BucketObject(file,
        bucket=bucket.id,
        source=FileAsset(filepath),
        content_type=mime_type)

pulumi.export('bucket_name',  bucket.id)`}}

{{ $goCodeBlock := `package main

import (
    "io/ioutil"
    "mime"
	"path"
    "path/filepath"

    "github.com/pulumi/pulumi-aws/sdk/go/aws/s3"
    "github.com/pulumi/pulumi/sdk/go/pulumi"
)

func main() {
    pulumi.Run(func(ctx *pulumi.Context) error {
        bucket, err := s3.NewBucket(ctx, "my-bucket", nil)
        if err != nil {
            return err
        }

        files, err := ioutil.ReadDir("./")
        if err != nil {
            return err
        }

        for _, item := range files {
            name := item.Name()
            if _, err := s3.NewBucketObject(ctx, name, &s3.BucketObjectArgs{
                Bucket:      siteBucket.ID(),
                Source:      pulumi.NewFileAsset(filepath.Join(siteDir, name)),
                ContentType: pulumi.String(mime.TypeByExtension(path.Ext(name))),
            }); err != nil {
                return err
            }
        }

        ctx.Export("bucketName", bucket.ID())
        return nil
    })
}`}}

{{ $cSharpCodeBlock := `using System.IO
using System.Collections.Generic;
using System.Threading.Tasks;
using Pulumi;
using Pulumi.Aws.S3;

class Program
{
    static Task Main()
    {
        return Deployment.RunAsync(() => {
            var bucket = new Bucket("my-bucket");

            string[] files = Directory.GetFiles("./files");
            foreach (string fileName in fileEntries)
            {
                var obj = new BucketObject("file", new BucketObjectArgs
                {
                    Bucket = bucket.Id,
                    Content = File.ReadAllText(fileName)
                });
            }

            return new Dictionary<string, object> {
                { "bucket_name" , bucket.Id },
            };
        });
    }
}`}}

<div id="terraformCompareCodeBlock" class="flex mt-10">
    <div class="w-5/12">
        {{ partial "chrome.html" . }}
        <ul class="bg-gray-800">
            <li class="-mb-px mr-1">
                <span class="code-file-nav--item">main.tf</span>
            </li>
        </ul>
        {{ partial "code" (dict "code" $terraformCodeBlock "lang" "plain" "mode" "dark" "opts" "linenos=true") }}
    </div>
    <div class="w-1/12 text-center">
        <i class="fas fa-arrow-right text-6xl block mb-20 mt-10"></i>
        <i class="fas fa-arrow-right text-6xl block mb-20"></i>
    </div>
    <div class="w-6/12">
        {{ partial "chrome.html" . }}
        <div class="flex relative bg-gray-800 h-32">
            <div id="terraformComparePython">
                <a class="code-file-nav--item file-not-active" href="#">__main__.py</a>
                <div class="compare-code-block w-full absolute left-0 hidden">
                    {{ partial "code" (dict "code" $pythonCodeBlock "lang" "python" "mode" "dark" "opts" "linenos=true") }}
                </div>
            </div>
            <div id="terraformCompareGo">
                <a class="code-file-nav--item file-not-active" href="#">main.go</a>
                <div class="compare-code-block w-full absolute left-0 hidden">
                    {{ partial "code" (dict "code" $goCodeBlock "lang" "go" "mode" "dark" "opts" "linenos=true") }}
                </div>
            </div>
            <div id="terraformCompareCSharp">
                <a class="code-file-nav--item file-not-active" href="#">Program.cs</a>
                <div class="compare-code-block w-full absolute left-0 hidden">
                    {{ partial "code" (dict "code" $cSharpCodeBlock "lang" "csharp" "mode" "dark" "opts" "linenos=true") }}
                </div>
            </div>
            <div id="terraformCompareTypeScript" class="order-first">
                <a class="code-file-nav--item" href="#">index.ts</a>
                <div class="compare-code-block w-full absolute">
                    {{ partial "code" (dict "code" $typeScriptCodeBlock "lang" "typescript" "mode" "dark" "opts" "linenos=true") }}
                </div>
            </div>
        </div>
    </div>
</div>
